<h1 align="center">ООП - Практикум - 02.04.2025 - Седмица 07</h1>

## Оператори

- Функция със специален синтаксис
- Предефинирането на оператори ни позволява да дефинираме поведение на оператор, който се прилага върху операнда от даден тип

### Операторите се разделят на 3 вида:

- Унарни: `+`, `-`, `++`, `--`
- Бинарни: `+`, `-`, `*`, `/`
- Тернарен: `<condition> ? <result_1> : <result_2>`

### Операторите имат 3 характеристики:

- Асоциативност
  - Лява: `(((a $ b) $ c) $ d)`
  - Дясна: `(a $ (b $ (c $ d)))`
 
- Приоритет

- Позиция спрямо операндите:
  - Префиксни: `++x`
  - Инфиксни
  - Суфиксни: `x++`
 
## Предефиниране на оператори (Operator overloading)

- Можем да предефинираме единствено съществуващи вече оператори и не можем да създаваме нови "операторни" символи
- Не можем да предефинираме операторите: `? :`, `::`, `.`
- Следните оператори задължително са вътрешни функции: `()`, `[]`, `->`, `operator=`
- Оператор `->` трябва да връща копие / const референция / указател
- Ако предефинираме операторите `&&` и/или `||`, губим предварително изчисление (мързеливо оценяване)

**ВАЖНО!!!** Не можем да предефинираме асоциативност, приоритет и позициониране спрямо аргументите

### Вътрешни функции (работим върху this)

- `+=`, `-=`, `*=`, `/=`

```c++
X& operator$(const X& other) {}
X obj1, obj2;
obj1.operator$(obj2);
```

### Външни функции

- `+`, `-`, `*`, `/`, `==`, `<`, `<=`, `>`, `>=`, `!=`

```c++
X operator$(const X& lhs, const X& rhs) {}
X obj1, obj2;
X obj3 = obj1 $ obj2;
```

### Оператори за вход/изход

- Външни функции, защото искаме потокът да е отляво

```c++
friend std::istream& operator>>(std::istream& is, const X& other)
{
        // reading business logic
        return is;
}
```

```c++
friend std::ostream& operator<<(std::ostream& os, const X& other)
{
        // writing business logic
        return os;
}
```

### Оператори за инкрементация/декрементация

```c++
struct Integer
{
        int x = 0;
}
```

- Суфикс - връща копие със старата стойност на **x** (`x++`)

```c++
Integer operator++(int)
{
        Integer toReturn = *this;
        x++;
        return toReturn;
}
```

- Префикс - връща променлива с новата стойност на **x** (`++x`)

```c++
Integer& operator++()
{
        x++;
        return *this;
}
```

## Приятелски функции и класове

### Приятелска функция

- Външна функция за даден клас, която има достъп до **private** / **protected** член-данните му

### Приятелски клас

- Външен клас, който има достъп до **private** / **protected** член-данните на друг клас
- Не се наследяват
- Губим транзитивност: `Z не е friend клас на X`
- Могат да са **private** / **protected** / **public**

```c++
class X
{
        friend class Y;
}

class Y
{
        friend class Z;
}
```

