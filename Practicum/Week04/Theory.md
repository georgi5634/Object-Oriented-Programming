<h1 align="center">ООП - Практикум - 11.03.2025 - Седмица 04</h1>

## Член-функции / Методи

- Функция в тялото на клас / структура
- Имат директен достъп до **private** / **protected** член-данните на обекта
- Компилаторът ги преобразува до нормална функция, като им прибавя допълнителен указател **this**

## Константни член-функции / методи

- Не променят член-данните на обекта
- Може да се извикват от константни обекти / референции / указатели
- В константни член-функции не можем да извикваме член-функции, които **не** са константни
- Константността на функцията зависи от константността на обекта

```c++
#include <iostream>

struct X
{
	void f(); // Преобразува се до void f(X* const this)
	void f() const; // Преобразува се до void f(const X* const this)
};
```

- Ако `f()` се извика от `const X` / `const X&` / `const X*` - ще се извика константната член-функция
- Ако `f()` се извика от `X` / `X&` / `X*` - ще се извика неконстантната член-функция

```c++
#include <iostream>

struct X
{
	void f();
	void g() const;
	void h() const;
};
```

- `f()` може да извиква `g()` и `h()`
- `g()` може да извиква `t()`
- `t()` може да извиква `g()`

## Конструктори

- Член-функция, която носи същото име като обекта, от който се извиква
- Използват се за инициализация на обекти
- **Нямат** тип на връщане
- Ако не укажем кой конструктор да се извика, се извиква **default**-ния
- **Default**-ен конструктор се генерира автоматично, ако няма дефиниран никакъв друг конструктор

### Конструктор без параметри (Default constructor)

- Инициализира обекта с **default**-ни стойности на член-данните

### Конвертиращ конструктор

- Конструктор с един параметър
- **explicit** (указва, че конструкторът **НЕ** е конвертиращ)

```c++
#include <iostream>

constexpr size_t SIZE = 100;

class Entity
{
private:
	char str[SIZE];
	int age;

public:
	explicit Entity(const char* str) : age(0)
	{
		strcpy(this->str, str);
	}

	Entity(int age) : age(age)
	{
		strcpy(this->str, "Unknown");
	}

	const char* getStr() const
	{
		return this->str;
	}

	int getAge() const
	{
		return this->age;
	}
};

void print(const Entity& e)
{
	std::cout << e.getStr() << " " << e.getAge() << std::endl;
}

int main()
{
	Entity a = "Test"; // не можем, понеже конструкторът е explicit
	Entity b = 21;

	print(3);

	return 0;
}
```

## Деструктори

- Член-функция, която носи същото име като обекта, от който се извиква, но има `~` отпред
- Използва се за унищожаване на обекти и външни ресурси
- Съществува **само един** деструктор в рамките на един обект
- Ако не дефинираме експлицитно такъв, то компилаторът създава деструктор автоматично

## Конструктори и деструктори при масиви от обекти

```c++
struct Point { int x; int y; };
```

```c++
{
	Point arr[3]; // 3x Point()
} // ~ 3x Point()
```

```c++
{
	Point* ptr = new Point(); // Point()
	// ...
	delete ptr; // ~ Point()
}
```

```c++
{
	Point* arr = new Point[3]; // 3x Point()
	// ...
	delete[] arr; // ~ 3x Point()
}
```

```c++
{
	Point* arr = new Point[3]; // 3x Point()
	// ...
	delete arr; // Undefined Behaviour
                    // Извиква се деструктор само за първия обект - ~ Point()
}
```

## Getters & Setters

### Getters

- Член-функция, която дава достъп до **private** / **protected** член-данните на даден обект на външния свят
- За примитивен тип връщаме по копие / константен указател
- За обект връщаме по константна референция / указател

### Setters

- Член-функция, която модифицира член-данните на даден обект **под контрол**

## Абстракция

- Използваме нещо, без да се интересуваме как работи
- Скриване на ненужните детайли

## Капсулация

- Ограничаване на достъпа

| Модификатор | Достъп                                           |
| ----------- | ------------------------------------------------ |
| private     | нямаме достъп извън рамките на обекта            |
| protected   | достъп в рамките на обекта и неговите наследници |
| public      | всички имат достъп                               |
 
## Mutable

- **mutable** член-данните могат да се модифицират в **константни** член-функции

**ВАЖНО!!!** При класовете, по **default** видимостта е **private**, докато в структурите е **public**
